(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(2),o=t.n(c),a=t(14),r=t.n(a),l=t(3),i=t(4),u=t.n(i),s="/api/fonebook",d=function(){return u.a.get(s).then((function(e){return e.data}))},m=function(e){return u.a.post(s,e).then((function(e){return e.data}))},b=function(e,n){return u.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return u.a.delete("".concat(s,"/").concat(e))},j=t(0),h=function(e){var n=e.handleFilterChange;return Object(j.jsx)("div",{className:"mt-5 mb-5",children:Object(j.jsx)("input",{type:"text",className:"filter-input",placeholder:"find a person..",onChange:n})})},p=function(e){var n=e.handleNameChange,t=e.handleNumberChange,c=e.addPerson;return Object(j.jsxs)("div",{className:"mt-5 mb-5",children:[Object(j.jsx)("h3",{children:"Add new"}),Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("span",{className:"flex-1 input-group",children:Object(j.jsx)("input",{id:"nameInputField",className:"person-form-input",type:"text",placeholder:"name..",onChange:n})}),Object(j.jsx)("span",{className:"flex-1 input-group",children:Object(j.jsx)("input",{id:"numberInputField",className:"person-form-input",type:"text",placeholder:"number..",onChange:t})}),Object(j.jsx)("button",{className:"flex-1 add-btn",type:"submit",onClick:c,children:"add"})]})})]})},O=function(e){var n=e.person,t=e.onClick;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"flex-2",children:n.name}),Object(j.jsx)("td",{className:"flex-1",children:n.number}),Object(j.jsx)("td",{className:"flex-2 fpull-right",children:Object(j.jsx)("button",{className:"delete-btn",onClick:function(){return t(n.id)},children:"X"})})]})},x=function(e){var n=e.phonebook,t=e.filter,c=e.onClick;return Object(j.jsx)("div",{className:"mt-5 mb-5",children:Object(j.jsx)("table",{children:Object(j.jsx)("tbody",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(j.jsx)(O,{person:e,onClick:c},e.name)}))})})})},g=function(e){var n=e.message;return null===n.content?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("div",{className:"mt-5 mb-5",children:Object(j.jsx)("p",{className:n.type,children:n.content})})},v=function(){var e=Object(c.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(""),r=Object(l.a)(a,2),i=r[0],u=r[1],s=Object(c.useState)(""),O=Object(l.a)(s,2),v=O[0],N=O[1],k=Object(c.useState)(""),C=Object(l.a)(k,2),F=C[0],y=C[1],w=Object(c.useState)({content:null,type:null}),I=Object(l.a)(w,2),S=I[0],D=I[1];Object(c.useEffect)((function(){d().then((function(e){o(e),console.log("Fonebook database loaded.")})).catch((function(e){console.log(e)}))}),[]);var E=function(){document.getElementById("nameInputField").value="",document.getElementById("numberInputField").value="",u(""),N("")},B=function(e,n){D({content:e,type:n}),setTimeout((function(){D({content:null,type:null})}),3e3)};return Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("h2",{children:"Fonebook"}),Object(j.jsx)(g,{message:S}),Object(j.jsx)(p,{handleNameChange:function(e){return u(e.target.value)},handleNumberChange:function(e){return N(e.target.value)},addPerson:function(e){var n;e.preventDefault();var c={name:i,number:v};if(t.find((function(e){return e.name===c.name}))&&(n=window.confirm("".concat(c.name," already exists in Fonebook, update the old number with new one?"))),n){var a=t.find((function(e){return e.name===c.name})).id;b(a,c).then((function(e){o(t.map((function(n){return n.id!==a?n:e}))),B("".concat(e.name," number updated."),"msg-info"),console.log("".concat(e.name," number updated.")),E()})).catch((function(e){B("No ".concat(t.find((function(e){return e.id===a})).name," found on Fonebook."),"msg-alert"),o(t.filter((function(e){return e.id!==a}))),console.log(e)}))}else m(c).then((function(e){o(t.concat(e)),console.log("".concat(e.name," added to Fonebook")),B("".concat(e.name," added to Fonebook."),"msg-info"),E()})).catch((function(e){console.log(e)}))}}),Object(j.jsx)("hr",{className:"mt-10 mb-10"}),Object(j.jsx)(h,{handleFilterChange:function(e){return y(e.target.value)}}),Object(j.jsx)(x,{phonebook:t,filter:F,onClick:function(e){var n=t.find((function(n){return n.id===e})).name;window.confirm("Delete ".concat(n," from Fonebook?"))?f(e).then((function(){o(t.filter((function(e){return e.name!==n}))),B("".concat(n," was removed from Fonebook."),"msg-info"),console.log("".concat(n," was removed from Fonebook."))})).catch((function(c){console.log(c),B("No ".concat(n," found on Fonebook."),"msg-alert"),o(t.filter((function(n){return n.id!==e})))})):(B("Deletion cancelled by user.","msg-info"),console.log("Deletion cancelled by user."))}})]})};t(38);r.a.render(Object(j.jsx)(o.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.6ada1bdd.chunk.js.map