{"version":3,"sources":["services/fonebookService.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Fonebook.js","components/InfoMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newPerson","post","id","put","delete","Filter","handleFilterChange","className","type","placeholder","onChange","PersonForm","handleNameChange","handleNumberChange","addPerson","onClick","Person","person","name","number","Fonebook","phonebook","filter","toLowerCase","includes","map","InfoMessage","message","content","App","useState","setPhonebook","newName","setNewName","newNumber","setNewNumber","setFilter","infoMessage","setInfoMessage","useEffect","fonebookService","phonebookData","console","log","catch","err","clearInputState","document","getElementById","value","getValidationErrorMsg","response","error","search","displayInfoMessage","setTimeout","e","target","confirmUpdate","preventDefault","find","window","confirm","updatedPerson","returnedPerson","concat","deletedPerson","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.b8920ad4.chunk.js","sourcesContent":["import axios from \"axios\"\r\nconst baseUrl = \"/api/fonebook\"\r\n\r\nconst read = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst create = (newPerson) => {\r\n  const request = axios.post(baseUrl, newPerson)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newPerson) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newPerson)\r\n  return request.then(res => res.data)\r\n}\r\n\r\nconst del = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { read, create, update, del }","const Filter = ({ handleFilterChange }) => {\r\n  return (\r\n    <div className=\"mt-5 mb-5\">\r\n      <input type=\"text\" className=\"filter-input\" placeholder=\"find a person..\" onChange={handleFilterChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","export const PersonForm = ({ handleNameChange, handleNumberChange, addPerson }) => {\r\n  return (\r\n    <div className=\"mt-5 mb-5\">\r\n      <h3>Add new</h3>\r\n      <form>\r\n        <div className=\"row\">\r\n        <span className=\"flex-1 input-group\">\r\n          <input id=\"nameInputField\" className=\"person-form-input\" type=\"text\" placeholder=\"name..\" onChange={handleNameChange} />\r\n        </span>\r\n        <span className=\"flex-1 input-group\">\r\n          <input id=\"numberInputField\" className=\"person-form-input\" type=\"text\" placeholder=\"number..\" onChange={handleNumberChange} />\r\n        </span>\r\n        <button className=\"flex-1 add-btn\" type=\"submit\" onClick={addPerson}>add</button>\r\n        </div>\r\n      </form>\r\n      </div>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","const Person = ({ person, onClick }) => {\r\n  return (\r\n    <tr>\r\n      <td className=\"flex-2\">{person.name}</td>\r\n      <td className=\"flex-1\">{person.number}</td>\r\n      <td className=\"flex-2 fpull-right\"><button className=\"delete-btn\" onClick={() => onClick(person.id)}>X</button></td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport default Person","import Person from \"./Person\"\r\n\r\nconst Fonebook = ({ phonebook, filter, onClick }) => {\r\n  return (\r\n    <div className=\"mt-5 mb-5\">\r\n      <table>\r\n        <tbody>\r\n          {phonebook.filter(person => person.name.toLowerCase().includes(filter.toLowerCase())).map(person => (\r\n            <Person key={person.id} person={person} onClick={onClick} />\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Fonebook","import React from 'react'\r\n\r\nconst InfoMessage = ({ message }) => {\r\n  if(message.content === null) {\r\n    return (\r\n      <></>\r\n    )\r\n  } else {\r\n    return (\r\n      <div className=\"mt-5 mb-5\">\r\n        <p className={message.type}>{message.content}</p>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default InfoMessage","import React, { useState, useEffect } from 'react'\nimport fonebookService from \"./services/fonebookService\"\nimport Filter from \"./components/Filter\"\nimport PersonForm from \"./components/PersonForm\"\nimport Fonebook from \"./components/Fonebook\"\nimport InfoMessage from \"./components/InfoMessage\"\n\nconst App = () => {\n  const [ phonebook, setPhonebook ] = useState([]) \n  const [ newName, setNewName ] = useState(\"\")\n  const [ newNumber, setNewNumber ] = useState(\"\")\n  const [ filter, setFilter ] = useState(\"\")\n  const [ infoMessage, setInfoMessage ] = useState({ content: null, type: null })\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => { \n    fonebookService.read()\n      .then(phonebookData => { \n        setPhonebook(phonebookData)\n        console.log(\"Fonebook database loaded.\")\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }, [])\n\n  const handleNameChange = (e) => setNewName(e.target.value)\n  const handleNumberChange = (e) => setNewNumber(e.target.value)\n  const handleFilterChange = (e) => setFilter(e.target.value)\n\n  // Add / Update person to fonebook\n  const addPerson = (e) => {\n    e.preventDefault()\n\n    let confirmUpdate\n    const newPerson = { name: newName, number: newNumber }\n    const personExists = phonebook.find(person => person.name === newPerson.name)\n    // console.log(personExists)\n\n    // if person exists prompt for update\n    if(personExists) {\n      confirmUpdate = window.confirm(`${newPerson.name} already exists in Fonebook, update the old number with new one?`)\n    }\n    \n    if(confirmUpdate) {\n      const id = phonebook.find(person => person.name === newPerson.name).id\n      fonebookService.update(id, newPerson)\n        .then(updatedPerson => {\n          setPhonebook(phonebook.map(person => person.id !== id ? person : updatedPerson))\n\n          // logs\n          displayInfoMessage(`${updatedPerson.name} number updated.`, \"msg-info\")\n          console.log(`${updatedPerson.name} number updated.`)\n          clearInputState()\n        })\n        .catch(err => {\n          if(err.response.data.type === \"DATABASE_ERROR\") {\n            displayInfoMessage(err.response.data.error, \"msg-alert\")\n            setPhonebook(phonebook.filter(person => person.id !== id))\n          } else if(err.response.data.type === \"VALIDATION_ERROR\") {\n            displayInfoMessage(getValidationErrorMsg(err), \"msg-alert\")\n          } else {\n            console.log(err.response)\n          }\n        })\n    } else {\n      fonebookService.create(newPerson)\n        .then(returnedPerson => {\n          setPhonebook(phonebook.concat(returnedPerson))\n\n          // logs\n          console.log(`${returnedPerson.name} added to Fonebook`)\n          displayInfoMessage(`${returnedPerson.name} added to Fonebook.`, \"msg-info\")\n          clearInputState()\n        })\n        .catch(err => {\n          // console.log(err.response)\n          // console.log(err.response.data)\n          // console.log(err.response.data.error.search(\"name\"))\n          // console.log(err.response.data.error.search(\"number\"))\n\n          displayInfoMessage(getValidationErrorMsg(err), \"msg-alert\")\n        })\n    }\n  }\n\n  // Delete person from fonebook\n  const deletePerson = (id) => {\n    // console.log(id)\n    const deletedPerson = phonebook.find(person => person.id === id).name\n    let confirm = window.confirm(`Delete ${deletedPerson} from Fonebook?`) \n    \n    if(confirm) {\n      fonebookService.del(id)\n      .then(() => {\n        setPhonebook(phonebook.filter(person => person.name !== deletedPerson))\n\n        // logs\n        displayInfoMessage(`${deletedPerson} was removed from Fonebook.`, \"msg-info\")\n        console.log(`${deletedPerson} was removed from Fonebook.`)\n      })\n      .catch(err => {\n        console.log(err)\n        displayInfoMessage(`No ${deletedPerson} found on Fonebook.`, \"msg-alert\")\n        setPhonebook(phonebook.filter(person => person.id !== id))\n      })\n    } else {\n      displayInfoMessage(`Deletion cancelled by user.`, \"msg-info\")\n      console.log(\"Deletion cancelled by user.\")\n    }\n  }\n\n  // Helpers\n  const clearInputState = () => {\n    document.getElementById(\"nameInputField\").value = \"\"\n    document.getElementById(\"numberInputField\").value = \"\"\n    setNewName(\"\")\n    setNewNumber(\"\")\n  }\n\n  const getValidationErrorMsg = (err) => {\n    if(err.response.data.error.search(\"name\") !== -1 && err.response.data.error.search(\"number\") !== -1) {\n      return \"Name (min. length 3) and number (min. length 8) are too short.\"\n    }\n    else if(err.response.data.error.search(\"name\") !== -1) {\n      return \"Name is too short (min. length 3).\"\n    }\n    else if(err.response.data.error.search(\"number\") !== -1) {\n      return \"Number is too short (min. length 8).\"\n    } \n  }\n\n  const displayInfoMessage = (content, type) => {\n    setInfoMessage({ content, type })\n\n    setTimeout(() => {\n      setInfoMessage({ content:null, type:null })\n    }, 3000)\n  }  \n\n  return (\n    <div className=\"container\">\n      <h2>Fonebook</h2>\n      <InfoMessage message={infoMessage} />\n      <PersonForm   \n        handleNameChange={handleNameChange} \n        handleNumberChange={handleNumberChange} \n        addPerson={addPerson} \n        />\n      <hr className=\"mt-10 mb-10\"></hr>\n      <Filter \n        handleFilterChange={handleFilterChange} \n        />\n      <Fonebook \n        phonebook={phonebook}\n        filter={filter}\n        onClick={deletePerson}\n        />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)"],"sourceRoot":""}